%div.form-container
  %h4 New Account Sign Up
  - if @all_error_messages.present?
    %div.alert.alert-danger
      %h4= pluralize(@all_error_messages.count, "error") + " prohibited this account from being saved:"
      %ul
        - @all_error_messages.each do |msg|
          %li= msg

  = form_with model: @account, url: registration_path do |f|
    %div.form-group
      = f.label :account_name, class: "form-label"
      = f.text_field :name, class: "form-control"
    %div.form-group
      = f.label :country, class: "form-label"
      = f.select :country, options_for_select(ISO3166::Country.countries.map { |c| ["#{c.emoji_flag} #{c.iso_short_name}", c.iso_short_name] }), class: 'country-select'
    %div.form-group
      = f.label :subdomain, class: "form-label"
      = f.text_field :subdomain, class: "form-control"
    %div.form-group
      = f.label :type, class: "form-label"
      = f.select :type, @allowes_account_types, class: "form-control"
    %br
    %h4 Create your administrator login
    = f.fields_for :users do |user_fields|
      %div.form-group
        = user_fields.label :admin_name, class: "form-label"
        = user_fields.text_field :name, class: "form-control"
      %div.form-group
        = user_fields.label :email, class: "form-label"
        = user_fields.email_field :email, class: "form-control"
      %div.form-group
        = user_fields.label :password, class: "form-label"
        = user_fields.password_field :password, class: "form-control"
      %div.form-group
        = user_fields.label :confirm_password, class: "form-label"
        = user_fields.password_field :password_confirmation, class: "form-control"
    %div.form-group.submit-group
      = f.submit 'Create Account'
